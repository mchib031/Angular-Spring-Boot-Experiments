{"version":3,"file":"angular-fire-remote-config.umd.js","sources":["../../../src/remote-config/remote-config.ts","../../../src/remote-config/remote-config.module.ts","../../../src/remote-config/rxfire.ts","../../../src/remote-config/firebase.ts","../../../src/remote-config/angular-fire-remote-config.ts"],"sourcesContent":["import { RemoteConfig as FirebaseRemoteConfig } from 'firebase/remote-config';\nimport { ɵgetAllInstancesOf } from '@angular/fire';\nimport { from, timer } from 'rxjs';\nimport { concatMap, distinct } from 'rxjs/operators';\n\n// see notes in core/firebase.app.module.ts for why we're building the class like this\n// tslint:disable-next-line:no-empty-interface\nexport interface RemoteConfig extends FirebaseRemoteConfig {}\n\nexport class RemoteConfig {\n  constructor(remoteConfig: FirebaseRemoteConfig) {\n    return remoteConfig;\n  }\n}\n\nexport const REMOTE_CONFIG_PROVIDER_NAME = 'remote-config';\n\n// tslint:disable-next-line:no-empty-interface\nexport interface RemoteConfigInstances extends Array<FirebaseRemoteConfig> {}\n\nexport class RemoteConfigInstances {\n  constructor() {\n    return ɵgetAllInstancesOf<FirebaseRemoteConfig>(REMOTE_CONFIG_PROVIDER_NAME);\n  }\n}\n\nexport const remoteConfigInstance$ = timer(0, 300).pipe(\n  concatMap(() => from(ɵgetAllInstancesOf<FirebaseRemoteConfig>(REMOTE_CONFIG_PROVIDER_NAME))),\n  distinct(),\n);\n","import { NgModule, Optional, NgZone, InjectionToken, ModuleWithProviders } from '@angular/core';\nimport { RemoteConfig as FirebaseRemoteConfig } from 'firebase/remote-config';\nimport { ɵmemoizeInstance, ɵgetDefaultInstanceOf, ɵAngularFireSchedulers, VERSION } from '@angular/fire';\nimport { RemoteConfig, RemoteConfigInstances, REMOTE_CONFIG_PROVIDER_NAME } from './remote-config';\nimport { FirebaseApps, FirebaseApp } from '@angular/fire/app';\nimport { registerVersion } from 'firebase/app';\n\nexport const PROVIDED_REMOTE_CONFIG_INSTANCES = new InjectionToken<RemoteConfig[]>('angularfire2.remote-config-instances');\n\nexport function defaultRemoteConfigInstanceFactory(provided: FirebaseRemoteConfig[]|undefined, defaultApp: FirebaseApp) {\n  const defaultRemoteConfig = ɵgetDefaultInstanceOf<FirebaseRemoteConfig>(REMOTE_CONFIG_PROVIDER_NAME, provided, defaultApp);\n  return new RemoteConfig(defaultRemoteConfig);\n}\n\nexport function remoteConfigInstanceFactory(fn: () => FirebaseRemoteConfig) {\n  return (zone: NgZone) => {\n    const remoteConfig = ɵmemoizeInstance<FirebaseRemoteConfig>(fn, zone);\n    return new RemoteConfig(remoteConfig);\n  };\n}\n\nconst REMOTE_CONFIG_INSTANCES_PROVIDER = {\n  provide: RemoteConfigInstances,\n  deps: [\n    [new Optional(), PROVIDED_REMOTE_CONFIG_INSTANCES ],\n  ]\n};\n\nconst DEFAULT_REMOTE_CONFIG_INSTANCE_PROVIDER = {\n  provide: RemoteConfig,\n  useFactory: defaultRemoteConfigInstanceFactory,\n  deps: [\n    [new Optional(), PROVIDED_REMOTE_CONFIG_INSTANCES ],\n    FirebaseApp,\n  ]\n};\n\n@NgModule({\n  providers: [\n    DEFAULT_REMOTE_CONFIG_INSTANCE_PROVIDER,\n    REMOTE_CONFIG_INSTANCES_PROVIDER,\n  ]\n})\nexport class RemoteConfigModule {\n  constructor() {\n    registerVersion('angularfire', VERSION.full, 'rc');\n  }\n}\n\nexport function provideRemoteConfig(fn: () => FirebaseRemoteConfig): ModuleWithProviders<RemoteConfigModule> {\n  return {\n    ngModule: RemoteConfigModule,\n    providers: [{\n      provide: PROVIDED_REMOTE_CONFIG_INSTANCES,\n      useFactory: remoteConfigInstanceFactory(fn),\n      multi: true,\n      deps: [\n        NgZone,\n        ɵAngularFireSchedulers,\n        FirebaseApps,\n      ]\n    }]\n  };\n}\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  getValue as _getValue,\n  getString as _getString,\n  getNumber as _getNumber,\n  getBoolean as _getBoolean,\n  getAll as _getAll\n} from 'rxfire/remote-config';\n\nexport const getValueChanges = ɵzoneWrap(_getValue, true);\nexport const getStringChanges = ɵzoneWrap(_getString, true);\nexport const getNumberChanges = ɵzoneWrap(_getNumber, true);\nexport const getBooleanChanges = ɵzoneWrap(_getBoolean, true);\nexport const getAllChanges = ɵzoneWrap(_getAll, true);\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nexport * from 'firebase/remote-config';\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  activate as _activate,\n  ensureInitialized as _ensureInitialized,\n  fetchAndActivate as _fetchAndActivate,\n  fetchConfig as _fetchConfig,\n  getAll as _getAll,\n  getBoolean as _getBoolean,\n  getNumber as _getNumber,\n  getRemoteConfig as _getRemoteConfig,\n  getString as _getString,\n  getValue as _getValue,\n  setLogLevel as _setLogLevel\n} from 'firebase/remote-config';\n\nexport const activate = ɵzoneWrap(_activate, true);\nexport const ensureInitialized = ɵzoneWrap(_ensureInitialized, true);\nexport const fetchAndActivate = ɵzoneWrap(_fetchAndActivate, true);\nexport const fetchConfig = ɵzoneWrap(_fetchConfig, true);\nexport const getAll = ɵzoneWrap(_getAll, true);\nexport const getBoolean = ɵzoneWrap(_getBoolean, true);\nexport const getNumber = ɵzoneWrap(_getNumber, true);\nexport const getRemoteConfig = ɵzoneWrap(_getRemoteConfig, true);\nexport const getString = ɵzoneWrap(_getString, true);\nexport const getValue = ɵzoneWrap(_getValue, true);\nexport const setLogLevel = ɵzoneWrap(_setLogLevel, true);\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["ɵgetAllInstancesOf","timer","concatMap","from","distinct","InjectionToken","ɵgetDefaultInstanceOf","ɵmemoizeInstance","Optional","FirebaseApp","registerVersion","VERSION","NgModule","NgZone","ɵAngularFireSchedulers","FirebaseApps","ɵzoneWrap","_getValue","_getString","_getNumber","_getBoolean","_getAll","_activate","_ensureInitialized","_fetchAndActivate","_fetchConfig","_getRemoteConfig","_setLogLevel"],"mappings":"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"}