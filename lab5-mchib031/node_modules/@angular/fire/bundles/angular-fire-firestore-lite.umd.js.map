{"version":3,"file":"angular-fire-firestore-lite.umd.js","sources":["../../../src/firestore/lite/lite.ts","../../../src/firestore/lite/lite.module.ts","../../../src/firestore/lite/rxfire.ts","../../../src/firestore/lite/firebase.ts","../../../src/firestore/lite/angular-fire-firestore-lite.ts"],"sourcesContent":["import { Firestore as FirebaseFirestore } from 'firebase/firestore/lite';\nimport { ɵgetAllInstancesOf } from '@angular/fire';\nimport { from, timer } from 'rxjs';\nimport { concatMap, distinct } from 'rxjs/operators';\n\n// see notes in core/firebase.app.module.ts for why we're building the class like this\n// tslint:disable-next-line:no-empty-interface\nexport interface Firestore extends FirebaseFirestore {}\n\nexport class Firestore {\n  constructor(firestore: FirebaseFirestore) {\n    return firestore;\n  }\n}\n\nexport const FIRESTORE_PROVIDER_NAME = 'firestore/lite';\n\n// tslint:disable-next-line:no-empty-interface\nexport interface FirestoreInstances extends Array<FirebaseFirestore> {}\n\nexport class FirestoreInstances {\n  constructor() {\n    return ɵgetAllInstancesOf<FirebaseFirestore>(FIRESTORE_PROVIDER_NAME);\n  }\n}\n\nexport const firestoreInstance$ = timer(0, 300).pipe(\n  concatMap(() => from(ɵgetAllInstancesOf<FirebaseFirestore>(FIRESTORE_PROVIDER_NAME))),\n  distinct(),\n);\n","import { NgModule, Optional, NgZone, InjectionToken, ModuleWithProviders } from '@angular/core';\nimport { Firestore as FirebaseFirestore } from 'firebase/firestore/lite';\nimport { AuthInstances  } from '@angular/fire/auth';\nimport { ɵmemoizeInstance, ɵgetDefaultInstanceOf, ɵAngularFireSchedulers, VERSION } from '@angular/fire';\nimport { Firestore, FirestoreInstances, FIRESTORE_PROVIDER_NAME } from './lite';\nimport { FirebaseApps, FirebaseApp } from '@angular/fire/app';\nimport { registerVersion } from 'firebase/app';\n\nexport const PROVIDED_FIRESTORE_INSTANCES = new InjectionToken<Firestore[]>('angularfire2.firestore-lite-instances');\n\nexport function defaultFirestoreInstanceFactory(provided: FirebaseFirestore[]|undefined, defaultApp: FirebaseApp) {\n  const defaultFirestore = ɵgetDefaultInstanceOf<FirebaseFirestore>(FIRESTORE_PROVIDER_NAME, provided, defaultApp);\n  return new Firestore(defaultFirestore);\n}\n\nexport function firestoreInstanceFactory(fn: () => FirebaseFirestore) {\n  return (zone: NgZone) => {\n    const firestore = ɵmemoizeInstance<FirebaseFirestore>(fn, zone);\n    return new Firestore(firestore);\n  };\n}\n\nconst FIRESTORE_INSTANCES_PROVIDER = {\n  provide: FirestoreInstances,\n  deps: [\n    [new Optional(), PROVIDED_FIRESTORE_INSTANCES ],\n  ]\n};\n\nconst DEFAULT_FIRESTORE_INSTANCE_PROVIDER = {\n  provide: Firestore,\n  useFactory: defaultFirestoreInstanceFactory,\n  deps: [\n    [new Optional(), PROVIDED_FIRESTORE_INSTANCES ],\n    FirebaseApp,\n  ]\n};\n\n@NgModule({\n  providers: [\n    DEFAULT_FIRESTORE_INSTANCE_PROVIDER,\n    FIRESTORE_INSTANCES_PROVIDER,\n  ]\n})\nexport class FirestoreModule {\n  constructor() {\n    registerVersion('angularfire', VERSION.full, 'lite');\n  }\n}\n\nexport function provideFirestore(fn: () => FirebaseFirestore): ModuleWithProviders<FirestoreModule> {\n  return {\n    ngModule: FirestoreModule,\n    providers: [{\n      provide: PROVIDED_FIRESTORE_INSTANCES,\n      useFactory: firestoreInstanceFactory(fn),\n      multi: true,\n      deps: [\n        NgZone,\n        ɵAngularFireSchedulers,\n        FirebaseApps,\n        // Firestore+Auth work better if Auth is loaded first\n        [new Optional(), AuthInstances ],\n      ]\n    }]\n  };\n}\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  collection as _collection,\n  collectionData as _collectionData,\n  doc as _doc,\n  docData as _docData,\n  snapToData as _snapToData,\n  fromRef as _fromRef\n} from 'rxfire/firestore/lite';\n\nexport const collectionSnapshots = ɵzoneWrap(_collection, true);\nexport const collectionData = ɵzoneWrap(_collectionData, true);\nexport const docSnapshots = ɵzoneWrap(_doc, true);\nexport const docData = ɵzoneWrap(_docData, true);\nexport const snapToData = ɵzoneWrap(_snapToData, true);\nexport const fromRef = ɵzoneWrap(_fromRef, true);\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nexport * from 'firebase/firestore/lite';\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  addDoc as _addDoc,\n  arrayRemove as _arrayRemove,\n  arrayUnion as _arrayUnion,\n  collection as _collection,\n  collectionGroup as _collectionGroup,\n  connectFirestoreEmulator as _connectFirestoreEmulator,\n  deleteDoc as _deleteDoc,\n  deleteField as _deleteField,\n  doc as _doc,\n  documentId as _documentId,\n  endAt as _endAt,\n  endBefore as _endBefore,\n  getDoc as _getDoc,\n  getDocs as _getDocs,\n  getFirestore as _getFirestore,\n  increment as _increment,\n  initializeFirestore as _initializeFirestore,\n  limit as _limit,\n  limitToLast as _limitToLast,\n  orderBy as _orderBy,\n  query as _query,\n  queryEqual as _queryEqual,\n  refEqual as _refEqual,\n  runTransaction as _runTransaction,\n  serverTimestamp as _serverTimestamp,\n  setDoc as _setDoc,\n  setLogLevel as _setLogLevel,\n  snapshotEqual as _snapshotEqual,\n  startAfter as _startAfter,\n  startAt as _startAt,\n  terminate as _terminate,\n  updateDoc as _updateDoc,\n  where as _where,\n  writeBatch as _writeBatch\n} from 'firebase/firestore/lite';\n\nexport const addDoc = ɵzoneWrap(_addDoc, true);\nexport const arrayRemove = ɵzoneWrap(_arrayRemove, true);\nexport const arrayUnion = ɵzoneWrap(_arrayUnion, true);\nexport const collection = ɵzoneWrap(_collection, true);\nexport const collectionGroup = ɵzoneWrap(_collectionGroup, true);\nexport const connectFirestoreEmulator = ɵzoneWrap(_connectFirestoreEmulator, true);\nexport const deleteDoc = ɵzoneWrap(_deleteDoc, true);\nexport const deleteField = ɵzoneWrap(_deleteField, true);\nexport const doc = ɵzoneWrap(_doc, true);\nexport const documentId = ɵzoneWrap(_documentId, true);\nexport const endAt = ɵzoneWrap(_endAt, true);\nexport const endBefore = ɵzoneWrap(_endBefore, true);\nexport const getDoc = ɵzoneWrap(_getDoc, true);\nexport const getDocs = ɵzoneWrap(_getDocs, true);\nexport const getFirestore = ɵzoneWrap(_getFirestore, true);\nexport const increment = ɵzoneWrap(_increment, true);\nexport const initializeFirestore = ɵzoneWrap(_initializeFirestore, true);\nexport const limit = ɵzoneWrap(_limit, true);\nexport const limitToLast = ɵzoneWrap(_limitToLast, true);\nexport const orderBy = ɵzoneWrap(_orderBy, true);\nexport const query = ɵzoneWrap(_query, true);\nexport const queryEqual = ɵzoneWrap(_queryEqual, true);\nexport const refEqual = ɵzoneWrap(_refEqual, true);\nexport const runTransaction = ɵzoneWrap(_runTransaction, true);\nexport const serverTimestamp = ɵzoneWrap(_serverTimestamp, true);\nexport const setDoc = ɵzoneWrap(_setDoc, true);\nexport const setLogLevel = ɵzoneWrap(_setLogLevel, true);\nexport const snapshotEqual = ɵzoneWrap(_snapshotEqual, true);\nexport const startAfter = ɵzoneWrap(_startAfter, true);\nexport const startAt = ɵzoneWrap(_startAt, true);\nexport const terminate = ɵzoneWrap(_terminate, true);\nexport const updateDoc = ɵzoneWrap(_updateDoc, true);\nexport const where = ɵzoneWrap(_where, true);\nexport const writeBatch = ɵzoneWrap(_writeBatch, true);\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["ɵgetAllInstancesOf","timer","concatMap","from","distinct","InjectionToken","ɵgetDefaultInstanceOf","ɵmemoizeInstance","Optional","FirebaseApp","registerVersion","VERSION","NgModule","NgZone","ɵAngularFireSchedulers","FirebaseApps","AuthInstances","ɵzoneWrap","_collection","_collectionData","_doc","_docData","_snapToData","_fromRef","_addDoc","_arrayRemove","_arrayUnion","_collectionGroup","_connectFirestoreEmulator","_deleteDoc","_deleteField","_documentId","_endAt","_endBefore","_getDoc","_getDocs","_getFirestore","_increment","_initializeFirestore","_limit","_limitToLast","_orderBy","_query","_queryEqual","_refEqual","_runTransaction","_serverTimestamp","_setDoc","_setLogLevel","_snapshotEqual","_startAfter","_startAt","_terminate","_updateDoc","_where","_writeBatch"],"mappings":"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"}