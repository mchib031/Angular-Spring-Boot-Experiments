{"version":3,"file":"angular-fire-auth.umd.js","sources":["../../../src/auth/auth.ts","../../../src/auth/auth.module.ts","../../../src/auth/rxfire.ts","../../../src/auth/firebase.ts","../../../src/auth/angular-fire-auth.ts"],"sourcesContent":["import { Auth as FirebaseAuth } from 'firebase/auth';\nimport { ɵgetAllInstancesOf } from '@angular/fire';\nimport { from, timer } from 'rxjs';\nimport { concatMap, distinct } from 'rxjs/operators';\n\nexport const AUTH_PROVIDER_NAME = 'auth';\n\n// see notes in core/firebase.app.module.ts for why we're building the class like this\n// tslint:disable-next-line:no-empty-interface\nexport interface Auth extends FirebaseAuth {}\n\nexport class Auth {\n  constructor(auth: FirebaseAuth) {\n    return auth;\n  }\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface AuthInstances extends Array<FirebaseAuth> {}\n\nexport class AuthInstances {\n  // tslint:disable-next-line:ban-types\n  constructor() {\n    return ɵgetAllInstancesOf<FirebaseAuth>(AUTH_PROVIDER_NAME);\n  }\n}\n\nexport const authInstance$ = timer(0, 300).pipe(\n  concatMap(() => from(ɵgetAllInstancesOf<FirebaseAuth>(AUTH_PROVIDER_NAME))),\n  distinct(),\n);\n","import { NgModule, Optional, NgZone, InjectionToken, ModuleWithProviders, PLATFORM_ID } from '@angular/core';\nimport { Auth as FirebaseAuth } from 'firebase/auth';\nimport { ɵgetDefaultInstanceOf, ɵmemoizeInstance, ɵAngularFireSchedulers, VERSION } from '@angular/fire';\nimport { Auth, AuthInstances, AUTH_PROVIDER_NAME } from './auth';\nimport { FirebaseApps, FirebaseApp } from '@angular/fire/app';\nimport { registerVersion } from 'firebase/app';\n\nexport const PROVIDED_AUTH_INSTANCES = new InjectionToken<Auth[]>('angularfire2.auth-instances');\n\nexport function defaultAuthInstanceFactory(provided: FirebaseAuth[]|undefined, defaultApp: FirebaseApp) {\n  const defaultAuth = ɵgetDefaultInstanceOf<FirebaseAuth>(AUTH_PROVIDER_NAME, provided, defaultApp);\n  return new Auth(defaultAuth);\n}\n\nexport function authInstanceFactory(fn: () => FirebaseAuth) {\n  return (zone: NgZone) => {\n    return ɵmemoizeInstance<FirebaseAuth>(fn, zone);\n  };\n}\n\nconst AUTH_INSTANCES_PROVIDER = {\n  provide: AuthInstances,\n  deps: [\n    [new Optional(), PROVIDED_AUTH_INSTANCES ],\n  ]\n};\n\nconst DEFAULT_AUTH_INSTANCE_PROVIDER = {\n  provide: Auth,\n  useFactory: defaultAuthInstanceFactory,\n  deps: [\n    [new Optional(), PROVIDED_AUTH_INSTANCES ],\n    FirebaseApp,\n    PLATFORM_ID,\n  ]\n};\n\n@NgModule({\n  providers: [\n    DEFAULT_AUTH_INSTANCE_PROVIDER,\n    AUTH_INSTANCES_PROVIDER,\n  ]\n})\nexport class AuthModule {\n  constructor() {\n    registerVersion('angularfire', VERSION.full, 'auth');\n  }\n}\n\nexport function provideAuth(fn: () => FirebaseAuth): ModuleWithProviders<AuthModule> {\n  return {\n    ngModule: AuthModule,\n    providers: [{\n      provide: PROVIDED_AUTH_INSTANCES,\n      useFactory: authInstanceFactory(fn),\n      multi: true,\n      deps: [\n        NgZone,\n        PLATFORM_ID,\n        ɵAngularFireSchedulers,\n        FirebaseApps,\n      ]\n    }]\n  };\n}\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  authState as _authState,\n  user as _user,\n  idToken as _idToken\n} from 'rxfire/auth';\n\nexport const authState = ɵzoneWrap(_authState, true);\nexport const user = ɵzoneWrap(_user, true);\nexport const idToken = ɵzoneWrap(_idToken, true);\n","// DO NOT MODIFY, this file is autogenerated by tools/build.ts\nexport * from 'firebase/auth';\nimport { ɵzoneWrap } from '@angular/fire';\nimport {\n  applyActionCode as _applyActionCode,\n  checkActionCode as _checkActionCode,\n  confirmPasswordReset as _confirmPasswordReset,\n  connectAuthEmulator as _connectAuthEmulator,\n  createUserWithEmailAndPassword as _createUserWithEmailAndPassword,\n  deleteUser as _deleteUser,\n  fetchSignInMethodsForEmail as _fetchSignInMethodsForEmail,\n  getAdditionalUserInfo as _getAdditionalUserInfo,\n  getAuth as _getAuth,\n  getIdToken as _getIdToken,\n  getIdTokenResult as _getIdTokenResult,\n  getMultiFactorResolver as _getMultiFactorResolver,\n  getRedirectResult as _getRedirectResult,\n  initializeAuth as _initializeAuth,\n  isSignInWithEmailLink as _isSignInWithEmailLink,\n  linkWithCredential as _linkWithCredential,\n  linkWithPhoneNumber as _linkWithPhoneNumber,\n  linkWithPopup as _linkWithPopup,\n  linkWithRedirect as _linkWithRedirect,\n  multiFactor as _multiFactor,\n  onAuthStateChanged as _onAuthStateChanged,\n  onIdTokenChanged as _onIdTokenChanged,\n  parseActionCodeURL as _parseActionCodeURL,\n  reauthenticateWithCredential as _reauthenticateWithCredential,\n  reauthenticateWithPhoneNumber as _reauthenticateWithPhoneNumber,\n  reauthenticateWithPopup as _reauthenticateWithPopup,\n  reauthenticateWithRedirect as _reauthenticateWithRedirect,\n  reload as _reload,\n  sendEmailVerification as _sendEmailVerification,\n  sendPasswordResetEmail as _sendPasswordResetEmail,\n  sendSignInLinkToEmail as _sendSignInLinkToEmail,\n  setPersistence as _setPersistence,\n  signInAnonymously as _signInAnonymously,\n  signInWithCredential as _signInWithCredential,\n  signInWithCustomToken as _signInWithCustomToken,\n  signInWithEmailAndPassword as _signInWithEmailAndPassword,\n  signInWithEmailLink as _signInWithEmailLink,\n  signInWithPhoneNumber as _signInWithPhoneNumber,\n  signInWithPopup as _signInWithPopup,\n  signInWithRedirect as _signInWithRedirect,\n  signOut as _signOut,\n  unlink as _unlink,\n  updateCurrentUser as _updateCurrentUser,\n  updateEmail as _updateEmail,\n  updatePassword as _updatePassword,\n  updatePhoneNumber as _updatePhoneNumber,\n  updateProfile as _updateProfile,\n  useDeviceLanguage as _useDeviceLanguage,\n  verifyBeforeUpdateEmail as _verifyBeforeUpdateEmail,\n  verifyPasswordResetCode as _verifyPasswordResetCode\n} from 'firebase/auth';\n\nexport const applyActionCode = ɵzoneWrap(_applyActionCode, true);\nexport const checkActionCode = ɵzoneWrap(_checkActionCode, true);\nexport const confirmPasswordReset = ɵzoneWrap(_confirmPasswordReset, true);\nexport const connectAuthEmulator = ɵzoneWrap(_connectAuthEmulator, true);\nexport const createUserWithEmailAndPassword = ɵzoneWrap(_createUserWithEmailAndPassword, true);\nexport const deleteUser = ɵzoneWrap(_deleteUser, true);\nexport const fetchSignInMethodsForEmail = ɵzoneWrap(_fetchSignInMethodsForEmail, true);\nexport const getAdditionalUserInfo = ɵzoneWrap(_getAdditionalUserInfo, true);\nexport const getAuth = ɵzoneWrap(_getAuth, true);\nexport const getIdToken = ɵzoneWrap(_getIdToken, true);\nexport const getIdTokenResult = ɵzoneWrap(_getIdTokenResult, true);\nexport const getMultiFactorResolver = ɵzoneWrap(_getMultiFactorResolver, true);\nexport const getRedirectResult = ɵzoneWrap(_getRedirectResult, true);\nexport const initializeAuth = ɵzoneWrap(_initializeAuth, true);\nexport const isSignInWithEmailLink = ɵzoneWrap(_isSignInWithEmailLink, true);\nexport const linkWithCredential = ɵzoneWrap(_linkWithCredential, true);\nexport const linkWithPhoneNumber = ɵzoneWrap(_linkWithPhoneNumber, true);\nexport const linkWithPopup = ɵzoneWrap(_linkWithPopup, true);\nexport const linkWithRedirect = ɵzoneWrap(_linkWithRedirect, true);\nexport const multiFactor = ɵzoneWrap(_multiFactor, true);\nexport const onAuthStateChanged = ɵzoneWrap(_onAuthStateChanged, true);\nexport const onIdTokenChanged = ɵzoneWrap(_onIdTokenChanged, true);\nexport const parseActionCodeURL = ɵzoneWrap(_parseActionCodeURL, true);\nexport const reauthenticateWithCredential = ɵzoneWrap(_reauthenticateWithCredential, true);\nexport const reauthenticateWithPhoneNumber = ɵzoneWrap(_reauthenticateWithPhoneNumber, true);\nexport const reauthenticateWithPopup = ɵzoneWrap(_reauthenticateWithPopup, true);\nexport const reauthenticateWithRedirect = ɵzoneWrap(_reauthenticateWithRedirect, true);\nexport const reload = ɵzoneWrap(_reload, true);\nexport const sendEmailVerification = ɵzoneWrap(_sendEmailVerification, true);\nexport const sendPasswordResetEmail = ɵzoneWrap(_sendPasswordResetEmail, true);\nexport const sendSignInLinkToEmail = ɵzoneWrap(_sendSignInLinkToEmail, true);\nexport const setPersistence = ɵzoneWrap(_setPersistence, true);\nexport const signInAnonymously = ɵzoneWrap(_signInAnonymously, true);\nexport const signInWithCredential = ɵzoneWrap(_signInWithCredential, true);\nexport const signInWithCustomToken = ɵzoneWrap(_signInWithCustomToken, true);\nexport const signInWithEmailAndPassword = ɵzoneWrap(_signInWithEmailAndPassword, true);\nexport const signInWithEmailLink = ɵzoneWrap(_signInWithEmailLink, true);\nexport const signInWithPhoneNumber = ɵzoneWrap(_signInWithPhoneNumber, true);\nexport const signInWithPopup = ɵzoneWrap(_signInWithPopup, true);\nexport const signInWithRedirect = ɵzoneWrap(_signInWithRedirect, true);\nexport const signOut = ɵzoneWrap(_signOut, true);\nexport const unlink = ɵzoneWrap(_unlink, true);\nexport const updateCurrentUser = ɵzoneWrap(_updateCurrentUser, true);\nexport const updateEmail = ɵzoneWrap(_updateEmail, true);\nexport const updatePassword = ɵzoneWrap(_updatePassword, true);\nexport const updatePhoneNumber = ɵzoneWrap(_updatePhoneNumber, true);\nexport const updateProfile = ɵzoneWrap(_updateProfile, true);\nexport const useDeviceLanguage = ɵzoneWrap(_useDeviceLanguage, true);\nexport const verifyBeforeUpdateEmail = ɵzoneWrap(_verifyBeforeUpdateEmail, true);\nexport const verifyPasswordResetCode = ɵzoneWrap(_verifyPasswordResetCode, true);\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["ɵgetAllInstancesOf","timer","concatMap","from","distinct","InjectionToken","ɵgetDefaultInstanceOf","ɵmemoizeInstance","Optional","FirebaseApp","PLATFORM_ID","registerVersion","VERSION","NgModule","NgZone","ɵAngularFireSchedulers","FirebaseApps","ɵzoneWrap","_authState","_user","_idToken","_applyActionCode","_checkActionCode","_confirmPasswordReset","_connectAuthEmulator","_createUserWithEmailAndPassword","_deleteUser","_fetchSignInMethodsForEmail","_getAdditionalUserInfo","_getAuth","_getIdToken","_getIdTokenResult","_getMultiFactorResolver","_getRedirectResult","_initializeAuth","_isSignInWithEmailLink","_linkWithCredential","_linkWithPhoneNumber","_linkWithPopup","_linkWithRedirect","_multiFactor","_onAuthStateChanged","_onIdTokenChanged","_parseActionCodeURL","_reauthenticateWithCredential","_reauthenticateWithPhoneNumber","_reauthenticateWithPopup","_reauthenticateWithRedirect","_reload","_sendEmailVerification","_sendPasswordResetEmail","_sendSignInLinkToEmail","_setPersistence","_signInAnonymously","_signInWithCredential","_signInWithCustomToken","_signInWithEmailAndPassword","_signInWithEmailLink","_signInWithPhoneNumber","_signInWithPopup","_signInWithRedirect","_signOut","_unlink","_updateCurrentUser","_updateEmail","_updatePassword","_updatePhoneNumber","_updateProfile","_useDeviceLanguage","_verifyBeforeUpdateEmail","_verifyPasswordResetCode"],"mappings":"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"}